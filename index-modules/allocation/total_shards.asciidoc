[[allocation-total-shards]]
=== 每个节点上的总分片数量

集群级别的分片重分配机制会尝试将一个索引的分片分配到尽量多的节点上。然而，由于分片数量和索引数量
的多少，以及它们的大小，都决定了并不是总是可以将分片分配的那么均匀。

下面这个 _dynamic_ 设置让你可以指定单个索引在一个节点上的总分片数量：

`index.routing.allocation.total_shards_per_node`::

    最大可以分配给这个节点的分片数量（包括主分片和分片副本），默认为不限制。

[WARNING]
=======================================

这个设置限制了节点上分片的数量，有可能导致某些分片没有被分配。

使用时请当心。
=======================================
